<%- include("../../partials/header") %>

<h1>Admin Dashboard</h1>
<p class="text-muted">Manage all reports</p>

<table class="table table-bordered table-striped">
  <thead>
    <tr>
      <th>Title</th>
      <th>Description</th>
      <th>Location</th>
      <th>Status</th>
      <th>Priority</th>
      <th>Created At</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% reports.forEach(r => { %>
      <tr>
        <td><%= r.title %></td>
        <td><%= r.description || "-" %></td>
        <td>
          <%= r.location.coordinates[1].toFixed(5) %>, 
          <%= r.location.coordinates[0].toFixed(5) %>
        </td>
        <td><span class="badge bg-info"><%= r.status %></span></td>
        <td><%= r.priority %></td>
        <td><%= r.createdAt.toLocaleString() %></td>
        <td>
          <form action="/admin/reports/<%= r._id %>/status" method="POST" class="d-inline">
            <input type="hidden" name="status" value="in-progress" />
            <button class="btn btn-warning btn-sm">In Progress</button>
          </form>
          <form action="/admin/reports/<%= r._id %>/status" method="POST" class="d-inline">
            <input type="hidden" name="status" value="fixed" />
            <button class="btn btn-success btn-sm">Fixed</button>
          </form>
        </td>
      </tr>
    <% }) %>
  </tbody>
</table>

<%- include("../../partials/footer") %>
